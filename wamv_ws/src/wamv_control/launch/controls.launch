<?xml version="1.0"?>
<launch>

    <!-- Specify controllers to include -->
    <arg name="heading_pid" default="true" />
    <arg name="speed_pid"   default="true" />

    <!-- Put everything in the namespace "pid" -->
    <group ns='pid'>
       <!-- Launch PID interpreter -->
       <node pkg="wamv_control" type="pid_interpreter.py" name="interpreter">
           <rosparam command="load" file="$(find wamv_control)/params/interpreter_params.yaml" />
           <remap from='topic_from_heading_controller'  to='heading/control_effort' />
           <remap from='topic_from_speed_controller'    to='speed/control_effort' />
           <!-- <remap from='motor_command' to='' /> -->
      </node>

        <!-- Include the heading PID controller launch file IF specified in args -->
        <group if="$(arg heading_pid)">
            <include file="$(find wamv_control)/launch/pid.launch" ns="$(arg heading_ns)">
                <arg name='param_file'  value='heading_controller_params.yaml' />
                <arg name='setpoint'    value='setpoint' />
                <arg name='state'       value='/current_angular_velocity' />
            </include>
        </group>

        <!-- Include the speed PID controller launch file IF specified in args -->
        <group if="$(arg speed_pid)">
            <include file="$(find wamv_control)/launch/pid.launch" ns="$(arg speed_ns)">
                <arg name='param_file'  value='speed_controller_params.yaml' />
                <arg name='setpoint'    value='setpoint' />
                <arg name='state'       value='/current_linear_velocity' />
            </include>
        </group>
    </group> <!-- pid -->

</launch>
